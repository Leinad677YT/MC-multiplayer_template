{
    "condition": "any_of",
    "terms": [
        {
            "condition": "entity_scores",
            "entity": "this",
            "scores": {
                "l.hit_det.is_invulnerable": 1
            }
        },
        {
            "condition": "all_of",
            "terms": [
                {
                  "condition": "entity_scores",
                  "entity": "this",
                  "scores": {
                        "l.team.current": {
                            "max": {
                                "type": "score",
                                "score": "l.team.current",
                                "target": "attacker"
                            },
                            "min": {
                                "type": "score",
                                "score": "l.team.current",
                                "target": "attacker"
                            }
                        }
                    }
                },
                {
                    "condition": "inverted",
                    "term": {
                        "condition": "entity_scores",
                        "entity": "this",
                        "scores": {
                            "l.core.entity_id": {
                                    "max": {
                                    "type": "score",
                                    "score": "l.core.entity_id",
                                    "target": "attacker"
                                },
                                "min": {
                                    "type": "score",
                                    "score": "l.core.entity_id",
                                    "target": "attacker"
                                }
                            }
                        }
                    }
                },
                {
                    "condition": "inverted",
                    "term": {
                        "condition": "entity_scores",
                        "entity": "this",
                        "scores": {
                            "l.player.id": {
                                "max": {
                                    "type": "score",
                                    "score": "l.player.id",
                                    "target": "attacker"
                                },
                                "min": {
                                    "type": "score",
                                    "score": "l.player.id",
                                    "target": "attacker"
                                }
                            }
                        }
                    }
                }
            ]
        }     
    ]
}